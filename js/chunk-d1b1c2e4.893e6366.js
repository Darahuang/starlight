(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1b1c2e4"],{"38aa":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[0!==t.total?a("div",{staticClass:"container my-5"},[a("div",{staticClass:"row justify-content-center text-center align-items-center"},[a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"bg-deep font-weight-bold rounded d-none d-md-block mr-md-2 mb-2 py-2",class:{"bg-accent":t.total,"d-block":t.total}},[t._v(" Step1.填寫訂購資料 ")])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"bg-deep font-weight-bold rounded d-none d-md-block mr-md-2 mb-2 py-2",class:{"bg-accent":!1===t.paid,"d-block":!1===t.paid}},[t._v(" Step2.金流付款 ")])]),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"bg-deep font-weight-bold rounded d-none d-md-block mr-md-2 mb-2 py-2",class:{"bg-accent":!0===t.paid,"d-block":!0===t.paid}},[t._v(" Step3.完成！ ")])])])]):t._e()])},r=[],i={props:["total","paid"]},o=i,n=a("2877"),l=Object(n["a"])(o,s,r,!1,null,null,null);e["a"]=l.exports},b7c8:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("CheckoutStep",{attrs:{total:t.cart.total}}),a("loading",{attrs:{active:t.isLoading},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"container"},[0!==t.cart.total?a("div",{staticClass:"my-4 row justify-content-center"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"border rounded-lg"},[t._m(0),a("div",{staticClass:"collapse show",attrs:{id:"cartInfo"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table table-hover"},[t._m(1),t._l(t.cart.carts,(function(e){return a("tbody",{key:e.id},[a("tr",[a("td",{staticClass:"align-middle d-md-table-cell d-none text-center"},[a("img",{staticClass:"cart-image",attrs:{src:e.product.imageUrl,alt:"產品圖片"}})]),a("td",{staticClass:"align-middle"},[t._v(" "+t._s(e.product.title)+" "),e.coupon?a("div",{staticClass:"text-heavy"},[t._v("已套用折扣碼")]):t._e()]),a("td",{staticClass:"align-middle text-center"},[a("div",{staticClass:"input-group mb-3"},[a("div",{staticClass:"input-group-prepend",attrs:{id:"button-addon3"}},[a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.changeQty(e.id,e.product.id,e.qty,!1)}}},[t._v(" - ")]),a("input",{directives:[{name:"model",rawName:"v-model.number",value:e.qty,expression:"item.qty",modifiers:{number:!0}}],staticClass:"form-control qty-input text-center",attrs:{type:"text",placeholder:"","aria-label":"Example text with two button addons","aria-describedby":"button-addon3"},domProps:{value:e.qty},on:{input:function(a){a.target.composing||t.$set(e,"qty",t._n(a.target.value))},blur:function(e){return t.$forceUpdate()}}}),a("div",{staticClass:"input-group-append",attrs:{id:"button-addon4"}},[a("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{type:"button"},on:{click:function(a){return t.changeQty(e.id,e.product.id,e.qty,!0)}}},[t._v(" + ")])])])])]),a("td",{staticClass:"align-middle text-right"},[t._v(" "+t._s(t._f("currencyFilter")(e.final_total))+" ")]),a("td",{staticClass:"align-middle text-right"},[a("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(a){return t.deleteCartItem(e.id)}}},[a("i",{staticClass:"far fa-trash-alt"})])])])])})),a("tfoot",{staticClass:"bg-light"},[a("tr",[a("td",{staticClass:"d-md-table-cell d-none"}),a("td",{staticClass:"text-right border-top-0",attrs:{colspan:"3"}},[t._v("總計")]),a("td",{staticClass:"h5 text-danger border-top-0"},[t._v(" "+t._s(t.cart.final_total)+" ")])])])],2)])])])]),t._m(2),a("div",{staticClass:"input-group mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入折扣碼","aria-label":"Recipient's username","aria-describedby":"button-addon2"},domProps:{value:t.coupon_code},on:{input:function(e){e.target.composing||(t.coupon_code=e.target.value)}}}),a("div",{staticClass:"input-group-append"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"button-addon2"},on:{click:t.addCouponCode}},[t._v(" 使用折扣碼 ")])])]),a("h2",{staticClass:"text-center my-4 text-primary font-weight-bolder"},[t._v("訂單資訊")]),a("form",{on:{submit:function(e){return e.preventDefault(),t.createOrder(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.form.user.email,expression:"form.user.email",modifiers:{lazy:!0}},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",name:"email",id:"email",placeholder:"請輸入Email"},domProps:{value:t.form.user.email},on:{change:function(e){return t.$set(t.form.user,"email",e.target.value)}}}),t.errors.has("email")?a("span",{staticClass:"text-danger"},[t._v("請輸入Email")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v("姓名")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.form.user.name,expression:"form.user.name",modifiers:{lazy:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"name",id:"name",placeholder:"請輸入姓名"},domProps:{value:t.form.user.name},on:{change:function(e){return t.$set(t.form.user,"name",e.target.value)}}}),t.errors.has("name")?a("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"tel"}},[t._v("電話")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.form.user.tel,expression:"form.user.tel",modifiers:{lazy:!0}},{name:"validate",rawName:"v-validate",value:"required|myPhone",expression:"'required|myPhone'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"text",name:"tel",id:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{change:function(e){return t.$set(t.form.user,"tel",e.target.value)}}}),t.errors.has("tel")?a("span",{staticClass:"text-danger"},[t._v("請輸入電話")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"address"}},[t._v("地址")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:t.form.user.address,expression:"form.user.address",modifiers:{lazy:!0}},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",name:"address",id:"address",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{change:function(e){return t.$set(t.form.user,"address",e.target.value)}}}),t.errors.has("address")?a("span",{staticClass:"text-danger"},[t._v("請輸入地址")]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"comment"}},[t._v("備註(選填)")]),a("textarea",{directives:[{name:"model",rawName:"v-model.lazy",value:t.form.message,expression:"form.message",modifiers:{lazy:!0}}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"5",rows:"5"},domProps:{value:t.form.message},on:{change:function(e){return t.$set(t.form,"message",e.target.value)}}})]),a("div",{staticClass:"d-flex justify-content-between mt-4"},[a("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:t.back}},[t._v(" 回到上一頁 ")]),a("button",{staticClass:"btn btn-primary"},[t._v("送出訂單")])])])])]):a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-md-8 text-center bg-height bg-cover d-flex justify-content-start align-items-center",staticStyle:{"background-image":"url(https://images.unsplash.com/photo-1557821552-17105176677c?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1489&q=80)"}},[a("p",{staticClass:"text-primary font-weight-bolder ml-5 h6"},[t._v(" 購物車中目前沒有商品 "),a("button",{staticClass:"btn btn-accent",attrs:{type:"button"},on:{click:t.toCustomerOrders}},[t._v("繼續逛逛")])])])])])],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-header"},[a("button",{staticClass:"btn btn-link text-decoration-none",attrs:{type:"button","data-toggle":"collapse","data-target":"#cartInfo","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(" 購物車資訊 "),a("i",{staticClass:"fas fa-caret-down"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"d-md-table-cell d-none text-center",attrs:{width:"20%"}}),a("th",[t._v("商品名稱")]),a("th",{staticClass:"text-center",attrs:{width:"20%"}},[t._v("數量")]),a("th",{attrs:{width:"15%"}},[t._v("單價")]),a("th",{attrs:{width:"10%"}},[t._v("刪除")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-primary my-3"},[a("i",{staticClass:"fa fa-star mr-2",attrs:{"aria-hidden":"true"}}),a("span",[t._v(" 慶祝周年慶, 輸入「 "),a("span",{staticClass:"text-danger"},[t._v("anniversary")]),t._v("」，享受9折優惠! ")])])}],i=(a("99af"),a("5530")),o=a("38aa"),n=a("2f62"),l={components:{CheckoutStep:o["a"]},data:function(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){this.$store.dispatch("getCart")},back:function(){var t=this;t.$router.back()},createOrder:function(){var t=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("starlightselect","/order");t.$validator.validate().then((function(a){a&&t.axios.post(e,{data:t.form}).then((function(e){e.data.success&&t.$router.push("/checkout/".concat(e.data.orderId))}))}))},deleteCartItem:function(t){this.$store.dispatch("deleteCartItem",t)},toCustomerOrders:function(){var t=this;t.$router.push("/customer_orders")},changeQty:function(t,e,a,s){var r,i=this;r=!0===s?a+1:1===a?1:a-1,i.$store.dispatch("updateQty",{originCartId:t,originProductId:e,newQty:r})},addCouponCode:function(){this.$store.dispatch("addCouponCode")}},created:function(){var t=this;t.getCart()},computed:Object(i["a"])(Object(i["a"])({},Object(n["c"])(["cart","isLoading"])),{},{coupon_code:{get:function(){return this.$store.state.coupon_code},set:function(t){this.$store.commit("COUPON",t)}}})},d=l,c=a("2877"),u=Object(c["a"])(d,s,r,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-d1b1c2e4.893e6366.js.map